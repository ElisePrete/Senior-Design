{"ast":null,"code":"import Other from './OtherQandA/Other';\nimport MoreOptions from './MoreOptions/MoreOptions';\nimport SaveMessages from './Chatbot';\nimport loadMessages from './Chatbot';\nimport { useEffect } from 'react'; //Action provider contains all the 'functions' of the chatbot\n\nclass ActionProvider {\n  constructor(createChatBotMessage, setStateFunc, createClientMessage, stateRef, createCustomMessage) {\n    this.chat_messages = [];\n\n    this.addMessageToState = message => {\n      this.chat_messages = [...this.chat_messages, message];\n      console.log(\"saving:\", this.chat_messages);\n      SaveMessages(\"hello\", \"\");\n\n      if (this.stateRef.messages == undefined) {\n        this.setState(prevState => ({ ...prevState,\n          messages: [message]\n        }));\n      } else {\n        this.setState(prevState => ({ ...prevState,\n          messages: [...prevState.messages, message]\n        }));\n      }\n    };\n\n    this.handleInitialOptions = () => {\n      this.setState(state => ({ ...state,\n        howManyQs: 0,\n        InputQuestion: \"\",\n        handleOther: false,\n        DocumentSearch: -1\n      }));\n      this.addMessageToState(this.createChatBotMessage(`What would you like to search next?`, {\n        widget: \"InitialOptions\"\n      }));\n    };\n\n    this.greet = () => {\n      const message = this.createChatBotMessage(\"Hello! :)\");\n      this.addMessageToState(message); //adds message to ui\n    };\n\n    this.handleConfusion = () => {\n      const message = this.createChatBotMessage(\"Sorry, i did not catch that. Could you rephrase?\");\n      this.addMessageToState(message); //adds message to ui\n    };\n\n    this.handleDocuments = question => {\n      this.setState(state => ({ ...state,\n        InputQuestion: question\n      }));\n      var message = this.createChatBotMessage(\"Docs found:\", {\n        widget: \"DocSearch\"\n      });\n      this.addMessageToState(message);\n      message = this.createChatBotMessage(\"Type to search for more documents or...\", {\n        widget: \"DocOptions\"\n      });\n      this.addMessageToState(message);\n    };\n\n    this.handleExampleQ = () => {\n      var message = this.createChatBotMessage({\n        widget: \"ExampleQs\"\n      });\n      this.addMessageToState(message);\n    };\n\n    this.handleOtherSetup = () => {\n      this.setState(state => ({ ...state,\n        InputQuestion: \"\",\n        OtherOptions: false,\n        DocumentSearch: false,\n        howManyQs: 0\n      }));\n      const message = this.createChatBotMessage(\"What would you like to know about the claims process?\");\n      this.addMessageToState(message);\n    };\n\n    this.handleDocSetup = () => {\n      this.setState(state => ({ ...state,\n        InputQuestion: \"\",\n        DocumentSearch: true,\n        OtherOptions: false,\n        howManyQs: 0\n      }));\n      const message = this.createChatBotMessage(\"What are you searching for?:\");\n      this.addMessageToState(message);\n    };\n\n    this.handleOther = (question, num) => {\n      //console.log(\"num:\", num)\n      var message = this.createChatBotMessage(\"Results found:\", {\n        widget: \"Other\"\n      });\n      this.addMessageToState(message); //if handleOther is being called from a widget‚ it means the 'see more results' button was chosen.\n\n      var otherWidget = \"MoreOptions\";\n\n      if (!num) {\n        num = 4; // otherWidget = \"MoreResults\" *not sure about this chief*\n      }\n\n      this.setState(state => ({ ...state,\n        OtherOptions: true,\n        InputQuestion: question,\n        howManyQs: num\n      }));\n      message = this.createChatBotMessage(\"Have I answered your question?\", {\n        widget: otherWidget\n      });\n      this.addMessageToState(message);\n    };\n\n    this.createChatBotMessage = createChatBotMessage;\n    this.setState = setStateFunc;\n    this.createClientMessage = createClientMessage;\n    this.stateRef = stateRef;\n    this.createCustomMessage = createCustomMessage;\n  } //adds message to list of chatbot messages. used in all subsequent funcs\n\n\n  save(saveFunction) {\n    this.setState(state => saveFunction(\"hello\", \"\"));\n  }\n\n}\n\nexport default ActionProvider;","map":{"version":3,"sources":["/home/lizz/spring2022/dfind/Senior-Design/frontend/src/components/Chatbot/ActionProvider.js"],"names":["Other","MoreOptions","SaveMessages","loadMessages","useEffect","ActionProvider","constructor","createChatBotMessage","setStateFunc","createClientMessage","stateRef","createCustomMessage","chat_messages","addMessageToState","message","console","log","messages","undefined","setState","prevState","handleInitialOptions","state","howManyQs","InputQuestion","handleOther","DocumentSearch","widget","greet","handleConfusion","handleDocuments","question","handleExampleQ","handleOtherSetup","OtherOptions","handleDocSetup","num","otherWidget","save","saveFunction"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,YAAP,MAAyB,WAAzB;AACA,OAAOC,YAAP,MAAyB,WAAzB;AACA,SAASC,SAAT,QAA0B,OAA1B,C,CACA;;AACA,MAAMC,cAAN,CAAqB;AAEnBC,EAAAA,WAAW,CACTC,oBADS,EAETC,YAFS,EAGTC,mBAHS,EAITC,QAJS,EAKTC,mBALS,EAME;AAAA,SAPbC,aAOa,GAPG,EAOH;;AAAA,SASbC,iBATa,GASQC,OAAD,IAAa;AAC/B,WAAKF,aAAL,GAAsB,CAAC,GAAG,KAAKA,aAAT,EAAuBE,OAAvB,CAAtB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB,KAAKJ,aAA5B;AACAV,MAAAA,YAAY,CAAC,OAAD,EAAS,EAAT,CAAZ;;AACA,UAAI,KAAKQ,QAAL,CAAcO,QAAd,IAA0BC,SAA9B,EAAyC;AACvC,aAAKC,QAAL,CAAeC,SAAD,KAAgB,EAC5B,GAAGA,SADyB;AAE5BH,UAAAA,QAAQ,EAAE,CAACH,OAAD;AAFkB,SAAhB,CAAd;AAKD,OAND,MAOK;AACH,aAAKK,QAAL,CAAeC,SAAD,KAAgB,EAC5B,GAAGA,SADyB;AAE5BH,UAAAA,QAAQ,EAAE,CAAC,GAAGG,SAAS,CAACH,QAAd,EAAuBH,OAAvB;AAFkB,SAAhB,CAAd;AAKD;AAEF,KA5BY;;AAAA,SA8BbO,oBA9Ba,GA8BU,MAAM;AAC3B,WAAKF,QAAL,CAAeG,KAAD,KAAY,EACxB,GAAGA,KADqB;AAExBC,QAAAA,SAAS,EAAC,CAFc;AAGxBC,QAAAA,aAAa,EAAE,EAHS;AAIxBC,QAAAA,WAAW,EAAC,KAJY;AAKxBC,QAAAA,cAAc,EAAC,CAAC;AALQ,OAAZ,CAAd;AAQA,WAAKb,iBAAL,CAAuB,KAAKN,oBAAL,CACpB,qCADoB,EACkB;AACrCoB,QAAAA,MAAM,EAAC;AAD8B,OADlB,CAAvB;AAMD,KA7CY;;AAAA,SA+CbC,KA/Ca,GA+CL,MAAM;AACZ,YAAMd,OAAO,GAAG,KAAKP,oBAAL,CAA0B,WAA1B,CAAhB;AACA,WAAKM,iBAAL,CAAuBC,OAAvB,EAFY,CAEoB;AACjC,KAlDY;;AAAA,SAoDbe,eApDa,GAoDK,MAAM;AACtB,YAAMf,OAAO,GAAG,KAAKP,oBAAL,CAA0B,kDAA1B,CAAhB;AACA,WAAKM,iBAAL,CAAuBC,OAAvB,EAFsB,CAEU;AACjC,KAvDY;;AAAA,SAyDbgB,eAzDa,GAyDMC,QAAD,IAAc;AAC9B,WAAKZ,QAAL,CAAeG,KAAD,KAAY,EACxB,GAAGA,KADqB;AAExBE,QAAAA,aAAa,EAACO;AAFU,OAAZ,CAAd;AAIA,UAAIjB,OAAO,GAAG,KAAKP,oBAAL,CAA0B,aAA1B,EAAwC;AAAEoB,QAAAA,MAAM,EAAC;AAAT,OAAxC,CAAd;AACA,WAAKd,iBAAL,CAAuBC,OAAvB;AACAA,MAAAA,OAAO,GAAI,KAAKP,oBAAL,CAA0B,yCAA1B,EAAsE;AAAEoB,QAAAA,MAAM,EAAC;AAAT,OAAtE,CAAX;AACA,WAAKd,iBAAL,CAAuBC,OAAvB;AAED,KAnEY;;AAAA,SAoEbkB,cApEa,GAoEI,MAAM;AACrB,UAAIlB,OAAO,GAAG,KAAKP,oBAAL,CAA2B;AAACoB,QAAAA,MAAM,EAAC;AAAR,OAA3B,CAAd;AACC,WAAKd,iBAAL,CAAuBC,OAAvB;AACF,KAvEY;;AAAA,SA0EbmB,gBA1Ea,GA0EM,MAAM;AACvB,WAAKd,QAAL,CAAeG,KAAD,KAAY,EACxB,GAAGA,KADqB;AAExBE,QAAAA,aAAa,EAAE,EAFS;AAGxBU,QAAAA,YAAY,EAAC,KAHW;AAIxBR,QAAAA,cAAc,EAAC,KAJS;AAKxBH,QAAAA,SAAS,EAAC;AALc,OAAZ,CAAd;AAOA,YAAMT,OAAO,GAAG,KAAKP,oBAAL,CAA0B,uDAA1B,CAAhB;AACA,WAAKM,iBAAL,CAAuBC,OAAvB;AACD,KApFY;;AAAA,SAuFbqB,cAvFa,GAuFI,MAAM;AACrB,WAAKhB,QAAL,CAAeG,KAAD,KAAY,EACxB,GAAGA,KADqB;AAExBE,QAAAA,aAAa,EAAE,EAFS;AAGxBE,QAAAA,cAAc,EAAC,IAHS;AAIxBQ,QAAAA,YAAY,EAAC,KAJW;AAKxBX,QAAAA,SAAS,EAAC;AALc,OAAZ,CAAd;AAOA,YAAMT,OAAO,GAAG,KAAKP,oBAAL,CAA0B,8BAA1B,CAAhB;AACA,WAAKM,iBAAL,CAAuBC,OAAvB;AACD,KAjGY;;AAAA,SAoGbW,WApGa,GAoGC,CAACM,QAAD,EAAUK,GAAV,KAAkB;AAC9B;AACA,UAAItB,OAAO,GAAG,KAAKP,oBAAL,CAA0B,gBAA1B,EAA2C;AAAEoB,QAAAA,MAAM,EAAC;AAAT,OAA3C,CAAd;AACA,WAAKd,iBAAL,CAAuBC,OAAvB,EAH8B,CAI9B;;AACA,UAAIuB,WAAW,GAAI,aAAnB;;AACA,UAAI,CAACD,GAAL,EAAU;AACRA,QAAAA,GAAG,GAAG,CAAN,CADQ,CAET;AACA;;AACD,WAAKjB,QAAL,CAAeG,KAAD,KAAY,EACxB,GAAGA,KADqB;AAExBY,QAAAA,YAAY,EAAC,IAFW;AAGxBV,QAAAA,aAAa,EAAEO,QAHS;AAIxBR,QAAAA,SAAS,EAACa;AAJc,OAAZ,CAAd;AAOAtB,MAAAA,OAAO,GAAI,KAAKP,oBAAL,CAA0B,gCAA1B,EAA6D;AAAEoB,QAAAA,MAAM,EAACU;AAAT,OAA7D,CAAX;AACA,WAAKxB,iBAAL,CAAuBC,OAAvB;AACD,KAvHY;;AACT,SAAKP,oBAAL,GAA4BA,oBAA5B;AACA,SAAKY,QAAL,GAAgBX,YAAhB;AACA,SAAKC,mBAAL,GAA2BA,mBAA3B;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACA,SAAKC,mBAAL,GAA2BA,mBAA3B;AAAkD,GAbnC,CAgBnB;;;AAiHA2B,EAAAA,IAAI,CAACC,YAAD,EAAc;AAEhB,SAAKpB,QAAL,CAAeG,KAAD,IAAaiB,YAAY,CAAC,OAAD,EAAS,EAAT,CAAvC;AACD;;AApIkB;;AAuIrB,eAAelC,cAAf","sourcesContent":["import Other from './OtherQandA/Other' \nimport MoreOptions from './MoreOptions/MoreOptions';\nimport SaveMessages from './Chatbot'\nimport loadMessages from './Chatbot'\nimport { useEffect } from 'react';\n//Action provider contains all the 'functions' of the chatbot\nclass ActionProvider {\n  chat_messages = []\n  constructor(\n    createChatBotMessage,\n    setStateFunc,\n    createClientMessage,\n    stateRef,\n    createCustomMessage,\n    ...rest  ) {\n      this.createChatBotMessage = createChatBotMessage;\n      this.setState = setStateFunc;\n      this.createClientMessage = createClientMessage;\n      this.stateRef = stateRef;\n      this.createCustomMessage = createCustomMessage;  }\n   \n  \n  //adds message to list of chatbot messages. used in all subsequent funcs\n  addMessageToState = (message) => { \n    this.chat_messages =  [...this.chat_messages,message]\n    console.log(\"saving:\", this.chat_messages)\n    SaveMessages(\"hello\",\"\")\n    if (this.stateRef.messages == undefined) {\n      this.setState((prevState) => ({\n        ...prevState,\n        messages: [message],\n      }\n      ));\n    }\n    else {\n      this.setState((prevState) => ({\n        ...prevState,\n        messages: [...prevState.messages,message],\n      }\n      ));\n    }\n    \n  };\n  //this shows the initial buttons we see \n  handleInitialOptions = () => {\n    this.setState((state) => ({\n      ...state,\n      howManyQs:0,\n      InputQuestion: \"\",\n      handleOther:false,\n      DocumentSearch:-1\n    }))\n\n    this.addMessageToState(this.createChatBotMessage(\n      `What would you like to search next?`, {\n        widget:\"InitialOptions\"\n      }\n    ))\n  \n  }\n  //function for being nice!\n  greet = () => {\n    const message = this.createChatBotMessage(\"Hello! :)\")\n    this.addMessageToState(message) //adds message to ui\n  }\n  \n  handleConfusion = () => {\n    const message = this.createChatBotMessage(\"Sorry, i did not catch that. Could you rephrase?\")\n    this.addMessageToState(message) //adds message to ui\n  }\n  //function to fetch docs\n  handleDocuments = (question) => {\n    this.setState((state) => ({\n      ...state,\n      InputQuestion:question\n     }))\n    var message = this.createChatBotMessage(\"Docs found:\",{ widget:\"DocSearch\"})\n    this.addMessageToState(message)\n    message =  this.createChatBotMessage(\"Type to search for more documents or...\" , { widget:\"DocOptions\" })\n    this.addMessageToState(message)\n    \n  }\n  handleExampleQ = () => {\n    var message = this.createChatBotMessage( {widget:\"ExampleQs\" })\n     this.addMessageToState(message)\n  }\n\n  //function to setup 'other q and a' questions\n  handleOtherSetup = () => {\n    this.setState((state) => ({\n      ...state,\n      InputQuestion: \"\",\n      OtherOptions:false,\n      DocumentSearch:false,\n      howManyQs:0\n    }))\n    const message = this.createChatBotMessage(\"What would you like to know about the claims process?\")\n    this.addMessageToState(message)\n  }\n\n  //Prefaces Document Search\n  handleDocSetup = () => {\n    this.setState((state) => ({\n      ...state,\n      InputQuestion: \"\",\n      DocumentSearch:true,\n      OtherOptions:false,\n      howManyQs:0\n    }))\n    const message = this.createChatBotMessage(\"What are you searching for?:\")\n    this.addMessageToState(message)\n  }\n\n  //function to fetch 'other q and a' questions based on user's query\n  handleOther = (question,num) => {\n    //console.log(\"num:\", num)\n    var message = this.createChatBotMessage(\"Results found:\",{ widget:\"Other\"})\n    this.addMessageToState(message)\n    //if handleOther is being called from a widget‚ it means the 'see more results' button was chosen.\n    var otherWidget  = \"MoreOptions\"\n    if (!num) {\n      num = 4\n     // otherWidget = \"MoreResults\" *not sure about this chief*\n    }\n    this.setState((state) => ({\n      ...state,\n      OtherOptions:true,\n      InputQuestion: question,\n      howManyQs:num\n     })\n    )\n    message =  this.createChatBotMessage(\"Have I answered your question?\" , { widget:otherWidget })\n    this.addMessageToState(message)\n  }\n\n  save(saveFunction){\n\n    this.setState((state) => ( saveFunction(\"hello\",\"\")))\n  }\n}\n\nexport default ActionProvider;"]},"metadata":{},"sourceType":"module"}